{
  "id": "9e5b67d0-53dc-42aa-bdb7-541f1939e114",
  "revision": 0,
  "last_node_id": 24,
  "last_link_id": 50,
  "nodes": [
    {
      "id": 12,
      "type": "LoadSAM3Model",
      "pos": [
        619.424717299163,
        120.03196674570798
      ],
      "size": [
        270,
        82
      ],
      "flags": {},
      "order": 0,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "sam3_model",
          "type": "SAM3_MODEL",
          "links": [
            44
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfyui-sam3",
        "ver": "82c8e4f88a6c0a9242712b827e05f5e67c4a90a7",
        "Node name for S&R": "LoadSAM3Model"
      },
      "widgets_values": [
        "models/sam3/sam3.pt"
      ]
    },
    {
      "id": 4,
      "type": "MaskPreview",
      "pos": [
        1642.4201600735514,
        96.7058837065646
      ],
      "size": [
        210,
        258
      ],
      "flags": {},
      "order": 4,
      "mode": 0,
      "inputs": [
        {
          "name": "mask",
          "type": "MASK",
          "link": 45
        }
      ],
      "outputs": [],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.72",
        "Node name for S&R": "MaskPreview"
      },
      "widgets_values": []
    },
    {
      "id": 3,
      "type": "PreviewImage",
      "pos": [
        1561.4061828256129,
        419.74855413577825
      ],
      "size": [
        312.1604553633704,
        258
      ],
      "flags": {},
      "order": 6,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 46
        }
      ],
      "outputs": [],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.72",
        "Node name for S&R": "PreviewImage"
      },
      "widgets_values": []
    },
    {
      "id": 21,
      "type": "SAM3MultipromptSegmentation",
      "pos": [
        1250.0604628294075,
        149.69327207973697
      ],
      "size": [
        319.196875,
        146
      ],
      "flags": {},
      "order": 3,
      "mode": 0,
      "inputs": [
        {
          "name": "sam3_model",
          "type": "SAM3_MODEL",
          "link": 44
        },
        {
          "name": "image",
          "type": "IMAGE",
          "link": 41
        },
        {
          "name": "multi_prompts",
          "type": "SAM3_MULTI_PROMPTS",
          "link": 42
        }
      ],
      "outputs": [
        {
          "name": "masks",
          "type": "MASK",
          "links": [
            45,
            47
          ]
        },
        {
          "name": "visualization",
          "type": "IMAGE",
          "links": [
            46
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfyui-sam3",
        "ver": "1de9dba004c40a00232c263113d88f0c52b6d0f2",
        "Node name for S&R": "SAM3MultipromptSegmentation"
      },
      "widgets_values": [
        2,
        false,
        false
      ]
    },
    {
      "id": 1,
      "type": "LoadImage",
      "pos": [
        488.1468326416015,
        306.42935311583375
      ],
      "size": [
        274.080078125,
        314
      ],
      "flags": {},
      "order": 1,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            40,
            41,
            48
          ]
        },
        {
          "name": "MASK",
          "type": "MASK",
          "links": null
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.72",
        "Node name for S&R": "LoadImage"
      },
      "widgets_values": [
        "scene.png",
        "image"
      ]
    },
    {
      "id": 23,
      "type": "MultibandSave",
      "pos": [
        1861.384654922165,
        -60.92969933225988
      ],
      "size": [
        270,
        82
      ],
      "flags": {},
      "order": 7,
      "mode": 0,
      "inputs": [
        {
          "name": "multiband",
          "type": "MULTIBAND_IMAGE",
          "link": 49
        }
      ],
      "outputs": [
        {
          "name": "saved_path",
          "type": "STRING",
          "links": null
        }
      ],
      "properties": {
        "aux_id": "PozzettiAndrea/ComfyUI-Multiband",
        "ver": "8b2374892369120d8f97ff8df0b95946d700b70b",
        "Node name for S&R": "MultibandSave"
      },
      "widgets_values": [
        "output/multiband",
        "npz"
      ]
    },
    {
      "id": 22,
      "type": "MultibandFromBatch",
      "pos": [
        1653.5367757320512,
        -55.54227882438979
      ],
      "size": [
        164.259375,
        46
      ],
      "flags": {},
      "order": 5,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "shape": 7,
          "type": "IMAGE",
          "link": 48
        },
        {
          "name": "masks",
          "shape": 7,
          "type": "MASK",
          "link": 47
        }
      ],
      "outputs": [
        {
          "name": "multiband",
          "type": "MULTIBAND_IMAGE",
          "links": [
            49,
            50
          ]
        }
      ],
      "properties": {
        "aux_id": "PozzettiAndrea/ComfyUI-Multiband",
        "ver": "8b2374892369120d8f97ff8df0b95946d700b70b",
        "Node name for S&R": "MultibandFromBatch"
      },
      "widgets_values": []
    },
    {
      "id": 24,
      "type": "MultibandPreview",
      "pos": [
        1869.9113326495071,
        105.99829310970233
      ],
      "size": [
        270,
        270
      ],
      "flags": {},
      "order": 8,
      "mode": 0,
      "inputs": [
        {
          "name": "multiband",
          "type": "MULTIBAND_IMAGE",
          "link": 50
        }
      ],
      "outputs": [
        {
          "name": "preview",
          "type": "IMAGE",
          "links": null
        }
      ],
      "properties": {
        "aux_id": "PozzettiAndrea/ComfyUI-Multiband",
        "ver": "8b2374892369120d8f97ff8df0b95946d700b70b",
        "Node name for S&R": "MultibandPreview"
      },
      "widgets_values": [
        0
      ]
    },
    {
      "id": 20,
      "type": "SAM3MultiRegionCollector",
      "pos": [
        880.7723557223663,
        371.1646105961098
      ],
      "size": [
        400,
        520
      ],
      "flags": {},
      "order": 2,
      "mode": 0,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 40
        }
      ],
      "outputs": [
        {
          "name": "multi_prompts",
          "type": "SAM3_MULTI_PROMPTS",
          "links": [
            42
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfyui-sam3",
        "ver": "1de9dba004c40a00232c263113d88f0c52b6d0f2",
        "Node name for S&R": "SAM3MultiRegionCollector"
      },
      "widgets_values": [
        "[{\"positive_points\":[{\"x\":5052.74953932266,\"y\":2847.0600693869637},{\"x\":4932.510591392486,\"y\":2953.9413227753366},{\"x\":4718.752461738845,\"y\":2967.301479448883},{\"x\":4638.593163118729,\"y\":3034.102262816616},{\"x\":4491.63444898185,\"y\":3020.7421061430696},{\"x\":4825.631526565666,\"y\":2766.8991293456834},{\"x\":4825.631526565666,\"y\":2566.4967792424845},{\"x\":4999.31000690925,\"y\":2379.4545858128313},{\"x\":4865.711175875724,\"y\":2513.0561525482976},{\"x\":4692.03269553214,\"y\":2513.0561525482976}],\"negative_points\":[],\"positive_boxes\":[{\"x1\":4291.236202431562,\"y1\":2285.9334890980053,\"x2\":5306.58731828636,\"y2\":3140.9835162049894}],\"negative_boxes\":[]},{\"positive_points\":[{\"x\":4377.376091472946,\"y\":2688.682054869728},{\"x\":4269.894000602327,\"y\":3100.7053005722346},{\"x\":4323.635046037636,\"y\":3888.923683655291},{\"x\":5953.780090908692,\"y\":3960.579900299205},{\"x\":6079.17586359108,\"y\":2706.5961090307064},{\"x\":6079.17586359108,\"y\":2437.885296616028},{\"x\":5416.369636555596,\"y\":2330.400971650157}],\"negative_points\":[{\"x\":4825.218136767192,\"y\":2652.8539465477706},{\"x\":4825.218136767192,\"y\":2652.8539465477706},{\"x\":4968.527591261351,\"y\":2957.3928672844063},{\"x\":4968.527591261351,\"y\":2957.3928672844063},{\"x\":5004.35495488489,\"y\":3064.8771922502774},{\"x\":5004.35495488489,\"y\":3064.8771922502774},{\"x\":4502.771864155334,\"y\":3011.1350297673416},{\"x\":4502.771864155334,\"y\":3011.1350297673416},{\"x\":4646.081318649493,\"y\":2724.510163191685},{\"x\":4646.081318649493,\"y\":2724.510163191685},{\"x\":4628.167636837723,\"y\":2473.713404937985},{\"x\":4628.167636837723,\"y\":2473.713404937985},{\"x\":4771.477091331882,\"y\":2473.713404937985},{\"x\":4771.477091331882,\"y\":2473.713404937985},{\"x\":4950.613909449581,\"y\":2473.713404937985},{\"x\":4950.613909449581,\"y\":2473.713404937985}],\"positive_boxes\":[{\"x1\":4126.584546108168,\"y1\":2258.7447550062425,\"x2\":6240.398999897009,\"y2\":4139.72044190899}],\"negative_boxes\":[]},{\"positive_points\":[{\"x\":3548.0180847401434,\"y\":3846.697386013082},{\"x\":3425.6349540068823,\"y\":2920.063198167415},{\"x\":3180.868692540362,\"y\":2902.5795342457986},{\"x\":2551.4697344835954,\"y\":2902.5795342457986},{\"x\":2656.3695608263897,\"y\":3724.3117385617675},{\"x\":3740.334433035266,\"y\":3846.697386013082},{\"x\":3827.7509549875954,\"y\":2885.095870324182}],\"negative_points\":[{\"x\":3268.285214492691,\"y\":3322.1874683645915},{\"x\":3268.285214492691,\"y\":3322.1874683645915},{\"x\":3250.8019101022255,\"y\":3811.730058169849},{\"x\":3250.8019101022255,\"y\":3811.730058169849},{\"x\":3006.035648635705,\"y\":3881.664713856315},{\"x\":3006.035648635705,\"y\":3881.664713856315},{\"x\":2918.619126683376,\"y\":2815.161214637717},{\"x\":2918.619126683376,\"y\":2815.161214637717},{\"x\":3443.1182583973487,\"y\":2640.324575421553},{\"x\":3443.1182583973487,\"y\":2640.324575421553},{\"x\":3373.185040835486,\"y\":2850.12854248095},{\"x\":3373.185040835486,\"y\":2850.12854248095},{\"x\":2883.6525179024443,\"y\":2867.6122064025662},{\"x\":2883.6525179024443,\"y\":2867.6122064025662}],\"positive_boxes\":[{\"x1\":2481.5365169217325,\"y1\":2850.12854248095,\"x2\":3932.6507813303897,\"y2\":3951.59936954278}],\"negative_boxes\":[]},{\"positive_points\":[{\"x\":2932.7782171760878,\"y\":2668.814503940247}],\"negative_points\":[],\"positive_boxes\":[{\"x1\":2689.838653921119,\"y1\":2587.8329842506896,\"x2\":3121.7312108188416,\"y2\":2911.7590630089194}],\"negative_boxes\":[]},{\"positive_points\":[{\"x\":3364.670774073811,\"y\":2668.814503940247}],\"negative_points\":[],\"positive_boxes\":[{\"x1\":3067.7446412066265,\"y1\":2182.925385802902,\"x2\":3688.590191747103,\"y2\":2938.7529029054385}],\"negative_boxes\":[]},{\"positive_points\":[{\"x\":6225.958963521223,\"y\":1724.0301075620762},{\"x\":5335.18056491967,\"y\":1697.0362676655568},{\"x\":5335.18056491967,\"y\":509.3073122187139},{\"x\":6252.95224832733,\"y\":482.31347232219474},{\"x\":5875.0462610418235,\"y\":995.1964303560588},{\"x\":5713.086552205178,\"y\":995.1964303560588},{\"x\":5686.09326739907,\"y\":1427.0978687003653},{\"x\":6037.00596987847,\"y\":1346.1163490108079},{\"x\":6010.012685072362,\"y\":914.2149106665013},{\"x\":6010.012685072362,\"y\":563.2949920117522},{\"x\":5659.099982592962,\"y\":698.264191494348},{\"x\":5578.120128174639,\"y\":1292.1286692177694},{\"x\":5524.133558562424,\"y\":1481.0855484934036}],\"negative_points\":[],\"positive_boxes\":[{\"x1\":5200.214140889132,\"y1\":455.3196324256756,\"x2\":6441.905241970085,\"y2\":1858.999307044672}],\"negative_boxes\":[]},{\"positive_points\":[{\"x\":4734.772415544377,\"y\":4286.516286659423},{\"x\":4562.493995876244,\"y\":4286.516286659423},{\"x\":4414.826779017845,\"y\":4188.069456350204},{\"x\":4513.271590256778,\"y\":4163.457748772898},{\"x\":4414.826779017845,\"y\":4212.681163927508},{\"x\":4759.38361835411,\"y\":4212.681163927508}],\"negative_points\":[],\"positive_boxes\":[{\"x1\":4217.93715653998,\"y1\":4065.0109184636794,\"x2\":4907.05083521251,\"y2\":4384.963116968642}],\"negative_boxes\":[]}]",
        ""
      ]
    }
  ],
  "links": [
    [
      40,
      1,
      0,
      20,
      0,
      "IMAGE"
    ],
    [
      41,
      1,
      0,
      21,
      1,
      "IMAGE"
    ],
    [
      42,
      20,
      0,
      21,
      2,
      "SAM3_MULTI_PROMPTS"
    ],
    [
      44,
      12,
      0,
      21,
      0,
      "SAM3_MODEL"
    ],
    [
      45,
      21,
      0,
      4,
      0,
      "MASK"
    ],
    [
      46,
      21,
      1,
      3,
      0,
      "IMAGE"
    ],
    [
      47,
      21,
      0,
      22,
      1,
      "MASK"
    ],
    [
      48,
      1,
      0,
      22,
      0,
      "IMAGE"
    ],
    [
      49,
      22,
      0,
      23,
      0,
      "MULTIBAND_IMAGE"
    ],
    [
      50,
      22,
      0,
      24,
      0,
      "MULTIBAND_IMAGE"
    ]
  ],
  "groups": [],
  "config": {},
  "extra": {
    "ds": {
      "scale": 1.0029546715544948,
      "offset": [
        -763.1056232871204,
        158.58808205052568
      ]
    },
    "frontendVersion": "1.35.9",
    "workflowRendererVersion": "LG",
    "VHS_latentpreview": false,
    "VHS_latentpreviewrate": 0,
    "VHS_MetadataImage": true,
    "VHS_KeepIntermediate": true
  },
  "version": 0.4
}